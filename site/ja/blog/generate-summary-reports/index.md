---
layout: layouts/blog-post.njk
title: Generate summary reports with the aggregation service
authors:
  - alexandrawhite
description: |2

  Experiment and set up the aggregation service to generate Attribution Reporting summary reports.
date: '2022-06-06'
hero: image/VbsHyyQopiec0718rMq2kTE1hke2/ASAZM31nd8FvgV22LTvJ.jpg
alt: Cords plugged into the server, which represents service set up.
tags:
  - privacy
  - experiment
---

アトリビューション レポートの[オリジントライアルの実験と参加](/docs/privacy-sandbox/attribution-reporting-experiment/)が可能になりました。開始するため使用できる開発者リソースとコードサンプルが多数用意されています。

To generate summary reports in the origin trial, you'll first need to set up the aggregation service. This blog post gives an overview of those steps.

{% Aside %} If you ran an origin trial with this API in 2021, follow the [migration guide](https://docs.google.com/document/d/1NY7SScCYcPc9v5wtf_fVAikFxGQTAFvwldhExN1P03Y/edit?usp=sharing) to prepare for the latest origin trial. {% endAside %}

## Key terms

[アトリビューション レポートの概要](/docs/privacy-sandbox/attribution-reporting-introduction/)と[要約レポート](/docs/privacy-sandbox/attribution-reporting/summary-reports/)の詳細をまだお読みでない場合は、集計サービスのセットアップについて学習する前に、それらに目を通しておくことをお勧めします。

- A *summary report* is a compiled output for the Attribution Reporting API, which aggregates information about a group of users. Summary reports offer detailed conversion data, such as purchase value and cart contents, with flexibility for click and view data.
- An *aggregatable report* is an encrypted report, generated by an individual user's browser. These contain data about individual conversions and associated metrics, as defined by the advertiser or adtech. Learn more about [aggregatable reports](https://github.com/WICG/conversion-measurement-api/blob/main/AGGREGATE.md).
- The *aggregation service* processes data from aggregatable reports to create a summary report.

## Set up the aggregation service

The [aggregation service proposal](https://github.com/WICG/conversion-measurement-api/blob/main/AGGREGATION_SERVICE_TEE.md) asks each adtech provider to operate their own instance of the aggregation service in a Trusted Execution Environment (TEE) deployed on a cloud service that supports needed security features.

For the initial implementation and origin trial, adtechs can set up [local testing](https://github.com/google/trusted-execution-aggregation-service/#set-up-local-testing) or [test in TEEs with Amazon Web Services](https://github.com/google/trusted-execution-aggregation-service/#test-on-aws-with-support-for-encrypted-reports) (AWS):

1. [Register](/origintrials/#/view_trial/771241436187197441) for the Privacy Sandbox Relevance and Measurement origin trial (OT).
2. Create or have an [Amazon Web Services account](https://portal.aws.amazon.com/gp/aws/developer/registration/index.html).
3. Complete the aggregation service [onboarding form](https://forms.gle/EHoecersGKhpcLPNA). After filling out this form we will send a verification email and instructions for how to set up the aggregation service.

Both the local testing tool and the aggregation service running on AWS expect aggregatable reports to be batched in the [Apache Avro](https://avro.apache.org/) format. [Review code snippets](https://github.com/google/trusted-execution-aggregation-service/blob/main/COLLECTING.md) which demonstrate how to collect and batch aggregatable reports.

## Generate summary reports with TEEs on AWS

{% Aside %} This is a general overview of how to generate summary reports in TEEs. Read the detailed developer documentation on [testing the aggregation service with AWS](https://github.com/google/trusted-execution-aggregation-service/#test-on-aws-with-support-for-encrypted-reports). {% endAside %}

To generate summary reports, you'll need to set up the aggregation service in AWS with [Terraform](https://www.terraform.io/). Terraform will help provision, manage, and decommission the aggregation service on AWS [Nitro Enclave instances](https://aws.amazon.com/ec2/nitro/nitro-enclaves/).

1. [Install](https://docs.aws.amazon.com/cli/latest/userguide/getting-started-install.html) and [set up](https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-quickstart.html) the latest AWS client.
2. [Set up Terraform](https://github.com/google/trusted-execution-aggregation-service/#set-up-terraform).
3. Download the [aggregation service dependencies](https://github.com/google/trusted-execution-aggregation-service/#download-dependencies).
4. Set up a [deployment environment](https://github.com/google/trusted-execution-aggregation-service/#set-up-your-deployment-environment).
5. [Test your system](https://github.com/google/trusted-execution-aggregation-service/#testing-the-system).

## Get support

For more support with the Attribution Reporting API:

- [Privacy Sandbox Developer Support の GitHub リポジトリ](https://github.com/GoogleChromeLabs/privacy-sandbox-dev-support/issues/new/choose)で新しいイシューを発行します。アトリビューション レポートのイシューテンプレートを選択してください。
- または、[開発者向けのアトリビューション レポート メーリング リストに参加](https://groups.google.com/u/1/a/chromium.org/g/attribution-reporting-api-dev)して、そこでご質問ください。

If you notice any unexpected behavior:

- [View Chrome issues](https://bugs.chromium.org/p/chromium/issues/list?q=component%3AInternals%3EConversionMeasurement) reported for the API implementation.
- Open a [Chrome bug](https://crbug.com/new).
- Raise a new Issue for the [Trusted Execution Aggregation Service](https://github.com/google/trusted-execution-aggregation-service/issues).
