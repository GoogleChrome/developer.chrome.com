---
layout: layouts/doc-post.njk
title: 'FAQ: ユーザーによるデータ消去がアトリビューションレポートに与える影響'
subhead: |2-

  ユーザーによるデータ消去はアトリビューション レポートにどのように影響しますか？Cookie ベースの測定と比べてどうですか？
description: |2-

  ユーザーによるデータ消去はアトリビューション レポートにどのように影響しますか？Cookie ベースの測定と比べてどうですか？
date: 2021-10-19
updated: 2021-10-19
authors:
  - maudn
---

{% Aside %} API に慣れていない場合は、この記事を読む前に、[アトリビューション レポートの概要（コンバージョン測定）](/docs/privacy-sandbox/attribution-reporting/)をお読みください。 {% endAside %}

[Attribution Reporting API](/docs/privacy-sandbox/attribution-reporting/) を使用すると、広告クリックが広告主サイトでのコンバージョン（販売やサインアップなど）につながったタイミングを測定できます。この API は、プライバシーを保護しながら、広告コンバージョンを測定するためのアプローチを提供します。サイト全体で個々のユーザーを識別するために使用できるサードパーティ Cookie やメカニズムには依存しません。代わりに、広告クリックとコンバージョンを関連付けるアトリビューション レポートが生成され、ユーザーのデバイスに保存されます。その後で、これらのレポートはブラウザから定義済みのエンドポイントに送信されます。

複数のサイトが、[オリジントライアル](/docs/privacy-sandbox/attribution-reporting/#status)を通じて、Chrome の Attribution Reporting API を試しました。

これらの早期の実験から得られたインサイトの 1 つに、**ユーザーによるデータ消去（ブラウザの履歴の消去など** が、広告主やアドテック企業が API から取得したデータに与える影響に関するものがあります。[Chrome の集計統計](https://groups.google.com/u/1/a/chromium.org/g/attribution-reporting-api-dev/c/5Ppe0cL-l1Y)が最近公開されました。この投稿では、ユーザーによるデータ消去がアトリビューション レポートに与える影響について、一般的な疑問に答えています。

{% Aside %} このブログ記事に記載されている数値と記述は、公開時点のものです。API の進化に伴い、変更される可能性があります。{% endAside %}

## ユーザーによるデータ消去はアトリビューション レポートにどのように影響しますか？

また、それは Cookie ベースの測定と比べてどうですか？

### 数値について

{% Aside 'caution' %} 以下に示す数値は、Cookie ベースの測定とアトリビューション レポートベースの測定の間に観察される矛盾を理解するのに役立ちます。

ただし、この API を使用するすべての組織で一貫して観察できる矛盾というわけではありません。

これらの数値は、オリジントライアルを実行していた一連のサイトに対して集計および測定されます。数値はサイト間で異なり、オリジントライアルで様々なパラメーターで API を使用する組織が増えるにつれて、変化する可能性があります。{% endAside %}

**以下のような複数の要因が数値に影響しています。**

- ユーザーが広告クリックによって移動した先のサイトの履歴を消去するかどうか。
- ユーザーが履歴を消去する傾向があるサイトのカテゴリでコンバージョンしているか（おそらくコンバージョン直後）。このタイプのコンテンツの広告では消去率が高い可能性があり、したがって Cookie ベースの測定との差異が大きくなる可能性があります。
- 同様に、ユーザーが広告をクリックした先のサイトの履歴を消去するかどうか。
- クリック後、長い時間または短い時間でアトリビューションが期限切れになるように構成されているかどうか（`attributionexpiry`）。
- クリックからコンバージョンまで実際に長い時間が経過したかどうか。

Chrome チームは引き続き統計を監視し、[開発者向けのメーリングリストで](https://groups.google.com/u/0/a/chromium.org/g/attribution-reporting-api-dev)公開していく予定です。

### クリックしてからコンバージョン前までに発生するデータ消去

**Cookie** を使用すると、クリック後コンバージョン前のデータが消去されるため、コンバージョンの一部がレポートされません。Cookie が消去されているため、コンバージョン時にリクエストに添付される Cookie がなく、そのコンバージョンを測定することはできません。ユーザーによるデータ消去が原因で報告されないコンバージョンが実際にどれくらいの割合で存在するかは不明です。この割合はアドテック企業（または広告主）ごとに異なります。

<figure>{% Img src="image/O2RNUyVSLubjvENAT3e7JSdqSOx1/O7UEJCUZ2vfOYpLvm5wL.png", alt="コンバージョン前にユーザーが開始するデータ消去は、Cookie ベースの測定に影響する。", width="800", height="180" %}<figcaption>コンバージョン前にユーザーが開始するデータ消去は、Cookie ベースの測定に影響する。</figcaption></figure>

{% Aside %} データ消去の方法が異なれば、測定データの削除に与えられる影響も異なることに注意してください。たとえば、過去 1 時間のデータを消去しても、それより前に設定された Cookie は消去されません。 {% endAside %}

**Attribution Reporting API** を使用すると、クリック後コンバージョン前のデータが消去されるため、一部のコンバージョンが報告されません。Attribution Reporting API を使用した早期の実験（オリジントライアル）では、ソース（クリックイベント）の **[約 16%](https://groups.google.com/u/1/a/chromium.org/g/attribution-reporting-api-dev/c/5Ppe0cL-l1Y)** がコンバージョン前に削除されていることが観察されています。これらのソースの一部はコンバージョンにつながりますが、ソースが削除されていれば、これらのコンバージョンのレポートは送信されません。

#### 例

コンバージョン率が **10%** で、合計クリック数を **1000** と想定し、他のエラーを考慮しない場合:

- ユーザーがデータを消去しない場合: アドテック企業は **100** のコンバージョンを観測します。
- データ消去を考慮した場合:
    - Cookie の場合: クリック後からコンバージョン前までにデータ消去が発生すると、クリックとコンバージョンをマッピングする Cookie がないため、一部のコンバージョンが特定のクリックイベントに関連付けられなくなります。この例では、アドテック企業が観測するコンバージョンは **100 未満**となります。
    - アトリビューション レポートの場合: クリック後からコンバージョン前までにデータ消去が発生すると、最初のオリジントライアルで、コンバージョンを意味するレポートの **1.6%**（10% の 16% = 1.6%）が消去されました。他のエラーを考慮しない場合、アドテック企業はコンバージョンを示すレポートを **100** ではなく **84** 受け取ることになります。

### コンバージョン後のデータ消去

**Cookie** を使用すると、コンバージョンはアドテック企業にすぐに報告されるため、コンバージョン後のデータ消去には何の効果もありません。

<figure>{% Img src="image/O2RNUyVSLubjvENAT3e7JSdqSOx1/7H4tlmi9nsa1LRNRkGlV.png", alt="コンバージョン後にユーザーがデータを消去しても、Cookie ベースの測定には影響しない。", width="800", height="195" %}<figcaption>コンバージョン後にユーザーがデータを消去しても、Cookie ベースの測定には影響しない。</figcaption></figure>

**Attribution Reporting API** を使用した場合、コンバージョン後にデータを消去すれば、ユーザーの選択（ブラウザの履歴消去やサイトデータの削除など）を尊重するため、レポートが消去されます。この API は、ユーザーのプライバシーを保護するために、レポートをすぐに送信するのではなく、遅延して送信します。したがって、ブラウザが事前定義されたエンドポイント（通常はアドテック企業）にレポートを送信するスケジュール済みの時刻になった時点で、ブラウザのストレージが空になっていることになります。

<figure>{% Img src="image/O2RNUyVSLubjvENAT3e7JSdqSOx1/IeZewxklxPft41cQFtFh.png", alt="コンバージョン後にユーザーがデータを消去すると、Attribution Reporting API に基づく測定に影響する。", width="800", height="280" %}<figcaption>コンバージョン後にユーザーがデータを消去すると、Attribution Reporting API に基づく測定に影響する。</figcaption></figure>

Attribution Reporting API を使用した早期の実験（オリジントライアル）では、レポートの**約 [6.5%](https://groups.google.com/u/1/a/chromium.org/g/attribution-reporting-api-dev/c/5Ppe0cL-l1Y)** がこの方法で削除されたことが観測されています。

## アトリビューション レポートに実際に影響を与えるユーザー操作は何ですか？

{% Aside %} ユーザーが保留中のコンバージョンを削除する方法は、プライバシーサンドボックスに新しい設定が追加されることで変更される可能性があります。 {% endAside %}

Chrome 94（この記事の執筆時点での Chrome 安定バージョン）の時点で、次のいずれかの操作を行うと、保存されているクリック イベントと保留中のレポートが消去されます。

- `chrome://settings` &gt; プライバシーとセキュリティ &gt; 閲覧履歴データの消去

    - **閲覧履歴**のチェックボックスをオンにします。
    - **Cookie と他のサイト データ**の消去チェックボックスをオンにします。
    - **データを削除**をクリックします。

- `chrome://settings` &gt; プライバシーとセキュリティ &gt; Cookie と他のサイトデータ

    - **すべてのウィンドウを閉じるときに Cookie とサイトデータを削除する**を切り替えます。
    - または、**ウィンドウを閉じるときに常に Cookie を削除**に動作を追加します。

- `chrome://history`:

    - 個々のエントリを削除する

- サイトごとの制御:

    - [サイトごとの履歴管理](https://blog.google/products/chrome/privacy-and-performance-working-together-chrome/#:~:text=delete%20the%20site%20from%20your%20browsing%20history)
    - URL バーのロックボタンをクリックし、**サイトの設定**に移動して、**データを削除**をクリックします。

**このリストはすべてを網羅しているわけではありません**。これらは、アトリビューションデータに影響を与える一般的なユーザー操作です。Attribution Reporting API に基づく測定か、Cookie に基づくかに関係なく、Chrome のアンインストールやシステムクリーナーの実行など、他のユーザー操作も測定に影響を与える可能性があります。

## 観測される損失は、ユーザーによるデータ消去に起因しますか？

オリジントライアルを介して API を試した組織は、**Cookie ベースの測定とアトリビューション レポートベースの測定の間に矛盾**があることに気付いたのではないでしょうか。アトリビューション レポートでは、コンバージョン数が少なく報告されている可能性があります。観測された損失は、ユーザーがデータを消去したことに起因する場合がありますが、この質問に確実に答えるには、今後のオリジントライアルにおいて矛盾を監視する必要があります。

過去のオリジントライアルにおける Cookie ベースの測定とアトリビューション レポートベースの測定の矛盾には、次の 2 つの要素が関与していることがわかっています。

- ユーザーによるデータ消去。
- [ネットワークエラー](https://bugs.chromium.org/p/chromium/issues/detail?id=1054127#c7)。これらはバグと見なされており、Chrome 94 での修正が必要です。

## ユーザーによるデータ消去に関して、Attribution Reporting API でプライバシーと有用性のバランスを取るにはどうすればよいですか？

API のテスト段階では、API のいくつかのパラメーターを試して、送信されたレポートへの影響とユーザーの識別可能性とのバランスを観察することを目的としています。これらのパラメーターの 1 つがレポートの遅延である可能性があります。<br>これらのパラメーターを調査するために、[定期的な WICG 会議でエコシステムに関するディスカッションを進行中](https://github.com/WICG/conversion-measurement-api/blob/main/meetings/2021-09-20-minutes.md#:~:text=browser%20clearing%20attribution%20data)です。

{% Aside %} より一般的な注意事項: アトリビューション レポートは、**プライバシーを保護**する測定アプローチを提供しています。これを実現するために、クロスサイトトラッキングが可能となってしまうデータの量を明示的に制限しています。**したがって、この API で利用できるデータは絶対的に、Cookie ベースのソリューションで利用できる量よりも少なくなっています。** {% endAside %}

## 集計レポートも同じような影響を受けますか？

{% Aside %}**集計**レポートと**イベント レベル**レポートの違いについて詳しくは、[こちら](/docs/privacy-sandbox/attribution-reporting-introduction/#use-cases-and-features)をご覧ください。 {% endAside %}

ユーザーによるデータ消去によって集計レポートにどのような影響があるかはわかっていません。

この記事で共有されている統計は、イベントレベルのレポート用です。集計レポートの場合、レポート送信の遅延は[数時間](https://github.com/WICG/conversion-measurement-api/blob/main/AGGREGATE.md#:~:text=Reports%20will%20not%20be%20delayed%20to%20the%20same%20extent%20as%20they%20are%20for%20event%20level%20reports.%20It%20may%20be%20possible%20to%20send%20these%20with%20as%20little%20delay%20as%20~0-1%20hour)と短くなる可能性がありますが（イベントレベルのレポートはクリックから数日または数週間後に送信される可能性があります）、ユーザーによるデータ消去の影響が低くなる可能性はありません。たとえば、特定のカテゴリのサイトでは、コンバージョン後すぐに閲覧データが消去される傾向があります。レポートがすぐに送信されるようにスケジュールされていたとしても、ユーザーが開始するこのような操作によってレポートが消去されてしまう可能性があります。

## アトリビューション レポート: すべてのリソース

[アトリビューション レポート](/docs/privacy-sandbox/attribution-reporting/)をご覧ください。

{% Partial 'privacy-sandbox/ar-get-updates.njk' %}
